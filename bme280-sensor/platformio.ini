; PlatformIO Project Configuration File - BME280 Environmental Sensor
;
; BME280 provides temperature, humidity, and atmospheric pressure readings
; I2C interface assignments:
;   - ESP32-S3 WROOM: SDA=GPIO 8, SCL=GPIO 9
;   - ESP32 (standard): SDA=GPIO 21, SCL=GPIO 22
;
; https://docs.platformio.org/page/projectconf.html

[env:esp32dev-battery]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 115200
upload_protocol = espota
; Battery-powered ESP32 BME280 devices
build_flags =
	-D CPU_FREQ_MHZ=80
	-D BATTERY_POWERED
	-D WIFI_PS_MODE=WIFI_PS_MIN_MODEM
	-D OLED_ENABLED=0
	-D MQTT_MAX_PACKET_SIZE=2048
	-D FIRMWARE_VERSION_MAJOR=1
	-D FIRMWARE_VERSION_MINOR=1
	-D FIRMWARE_VERSION_PATCH=7
	-D BUILD_TIMESTAMP=20260104
lib_deps =
	adafruit/Adafruit BME280 Library@^2.2.4
	adafruit/Adafruit Unified Sensor@^1.1.14
	knolleary/PubSubClient@^2.8.0
	bblanchon/ArduinoJson@^7.0.0
	tzapu/WiFiManager@^2.0.17
	khoih-prog/ESP_DoubleResetDetector@^1.3.2

[env:esp32dev-battery-display]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 115200
upload_protocol = espota
; Battery-powered ESP32 with OLED display
build_flags =
	-D CPU_FREQ_MHZ=80
	-D WIFI_PS_MODE=WIFI_PS_MIN_MODEM
	-D BATTERY_POWERED
	-D OLED_ENABLED=1
	-D MQTT_MAX_PACKET_SIZE=2048
	-D FIRMWARE_VERSION_MAJOR=1
	-D FIRMWARE_VERSION_MINOR=1
	-D FIRMWARE_VERSION_PATCH=7
	-D BUILD_TIMESTAMP=20260104
lib_deps =
	adafruit/Adafruit BME280 Library@^2.2.4
	adafruit/Adafruit Unified Sensor@^1.1.14
	knolleary/PubSubClient@^2.8.0
	bblanchon/ArduinoJson@^7.0.0
	tzapu/WiFiManager@^2.0.17
	khoih-prog/ESP_DoubleResetDetector@^1.3.2
	olikraus/U8g2@^2.35.9

[env:esp32dev-battery-display-serial]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 460800
upload_protocol = esptool
upload_flags = 
	--before=default_reset
	--after=hard_reset
; First-time USB flash for ESP32 battery-powered device with OLED
build_flags =
	-D CPU_FREQ_MHZ=80
	-D WIFI_PS_MODE=WIFI_PS_MIN_MODEM
	-D BATTERY_POWERED
	-D OLED_ENABLED=0
	-D OLED_ALWAYS_ON
	-D MQTT_MAX_PACKET_SIZE=2048
	-D FIRMWARE_VERSION_MAJOR=1
	-D FIRMWARE_VERSION_MINOR=1
	-D FIRMWARE_VERSION_PATCH=7
	-D BUILD_TIMESTAMP=20260104
lib_deps =
	adafruit/Adafruit BME280 Library@^2.2.4
	adafruit/Adafruit Unified Sensor@^1.1.14
	knolleary/PubSubClient@^2.8.0
	bblanchon/ArduinoJson@^7.0.0
	tzapu/WiFiManager@^2.0.17
	khoih-prog/ESP_DoubleResetDetector@^1.3.2
	olikraus/U8g2@^2.35.9

[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 115200
upload_protocol = espota
; Standard ESP32 development (wired power)
build_flags =
	-D WIFI_PS_MODE=WIFI_PS_NONE
	-D OLED_ENABLED=0
	-D MQTT_MAX_PACKET_SIZE=2048
	-D FIRMWARE_VERSION_MAJOR=1
	-D FIRMWARE_VERSION_MINOR=1
	-D FIRMWARE_VERSION_PATCH=7
	-D BUILD_TIMESTAMP=20260104
lib_deps =
	adafruit/Adafruit BME280 Library@^2.2.4
	adafruit/Adafruit Unified Sensor@^1.1.14
	knolleary/PubSubClient@^2.8.0
	bblanchon/ArduinoJson@^7.0.0
	tzapu/WiFiManager@^2.0.17
	khoih-prog/ESP_DoubleResetDetector@^1.3.2

[env:esp32dev-serial]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
upload_speed = 460800
upload_protocol = esptool
upload_flags = 
	--before=default_reset
	--after=hard_reset
; First-time USB flash for ESP32
build_flags =
	-D WIFI_PS_MODE=WIFI_PS_NONE
	-D OLED_ENABLED=0
	-D MQTT_MAX_PACKET_SIZE=2048
	-D FIRMWARE_VERSION_MAJOR=1
	-D FIRMWARE_VERSION_MINOR=1
	-D FIRMWARE_VERSION_PATCH=7
	-D BUILD_TIMESTAMP=20260104
lib_deps =
	adafruit/Adafruit BME280 Library@^2.2.4
	adafruit/Adafruit Unified Sensor@^1.1.14
	knolleary/PubSubClient@^2.8.0
	bblanchon/ArduinoJson@^7.0.0
	tzapu/WiFiManager@^2.0.17
	khoih-prog/ESP_DoubleResetDetector@^1.3.2

[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
upload_speed = 115200
upload_protocol = espota
; ESP32-S3 WROOM - Wired power environmental sensor
; GPIO 8 = SDA (I2C), GPIO 9 = SCL (I2C)
; OTA: export PLATFORMIO_UPLOAD_FLAGS="--auth=YOUR_PASSWORD" && pio run -e esp32s3 -t upload --upload-port IP
build_flags =
	-D ESP32S3
	-D WIFI_PS_MODE=WIFI_PS_NONE
	-D OLED_ENABLED=0
	-D MQTT_MAX_PACKET_SIZE=2048
	-D FIRMWARE_VERSION_MAJOR=1
	-D FIRMWARE_VERSION_MINOR=1
	-D FIRMWARE_VERSION_PATCH=7
	-D BUILD_TIMESTAMP=20260104
lib_deps =
	adafruit/Adafruit BME280 Library@^2.2.4
	adafruit/Adafruit Unified Sensor@^1.1.14
	knolleary/PubSubClient@^2.8.0
	bblanchon/ArduinoJson@^7.0.0
	tzapu/WiFiManager@^2.0.17
	khoih-prog/ESP_DoubleResetDetector@^1.3.2

[env:esp32s3-serial]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
monitor_speed = 115200
upload_speed = 460800
upload_protocol = esptool
upload_flags =
	--before=default_reset
	--after=hard_reset
; First-time USB flash for ESP32-S3 WROOM (wired power)
; GPIO 8 = SDA (I2C), GPIO 9 = SCL (I2C)
build_flags =
	-D ESP32S3
	-D WIFI_PS_MODE=WIFI_PS_NONE
	-D OLED_ENABLED=0
	-D MQTT_MAX_PACKET_SIZE=2048
	-D FIRMWARE_VERSION_MAJOR=1
	-D FIRMWARE_VERSION_MINOR=1
	-D FIRMWARE_VERSION_PATCH=7
	-D BUILD_TIMESTAMP=20260104
lib_deps =
	adafruit/Adafruit BME280 Library@^2.2.4
	adafruit/Adafruit Unified Sensor@^1.1.14
	knolleary/PubSubClient@^2.8.0
	bblanchon/ArduinoJson@^7.0.0
	tzapu/WiFiManager@^2.0.17
	khoih-prog/ESP_DoubleResetDetector@^1.3.2
